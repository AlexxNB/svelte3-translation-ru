---
title: Рендеринг на стороне сервера (SSR)
---

По умолчанию, Sapper рендерит сначала серверную часть (SSR), а затем заново монтирует любые динамические элементы на стороне клиента. Svelte отлично [поддерживает SSR](https://ru.svelte.dev/docs#API_komponenta_na_servere). Среди достоинств рендеринга на сервере — лучшая производительность и более качественная индексация сайта поисковыми системами, но вместе с тем есть и некоторые сложности.

### Создание компонента совместимого с SSR

Sapper хорошо работает с большинством сторонних библиотек, с которыми вы можете столкнуться. Однако иногда сторонняя библиотека поставляется собранной с прицелом на работу сразу с несколькими различными загрузчиками модулей. Иногда такой подход создаёт зависимость от объекта `window`, например, может проверяться на существование свойство `window.global`.

Поскольку в серверной среде, такой как Sapper, нет `window`, действие простого импорта такого модуля может привести к сбою импорта и завершить работу сервера Sapper с ошибкой:

```bash
ReferenceError: window is not defined
```

Чтобы избежать таких ошибок, используйте динамический импорт для вашего компонента из функции `onMount`, который вызывается только на стороне клиента. В этом случае, код импорта никогда не будет вызван на сервере:

```html
<script>
	import { onMount } from 'svelte';

	let MyComponent;

	onMount(async () => {
		const module = await import('my-non-ssr-component');
		MyComponent = module.default;
	});
</script>

<svelte:component this={MyComponent} foo="bar"/>
```
