---
title: Пользовательские CSS переходы
---

В модуле `svelte/transition` есть несколько встроенных переходов, но вы можете легко создавать и свои собственные переходы. Например, так выглядит реализация перехода `fade`:

```js
function fade(node, {
	delay = 0,
	duration = 400
}) {
	const o = +getComputedStyle(node).opacity;

	return {  
		delay,
		duration,
		css: t => `opacity: ${t * o}`
	};
}
```

Функция принимает два аргумента — элемент `node`, к которому применяется переход, и любые необходимые переходу параметры. Она возвращает объект перехода, который может иметь следующие свойства:

* `delay` — миллисекунды до начала перехода
* `duration` — длительность перехода в миллисекундах
* `easing` — функция плавности `p => t` (см. урок [Рассчёт движения](tutorial/tweened))
* `css` — функция `(t, u) => css`, где `u === 1 - t`
* `tick` — функция `(t, u) => {...}`, которая применяет какие-либо изменения к элементу, посложнее CSS

Значение `t` равно `0` при старте перехода появления и в конце перехода исчезновения, и равно `1` в конце появления и начале исчезновения.

Старайтесь всегда возвращать свойство `css`, а *не* свойство `tick`, так как CSS-анимация запускается вне основного потока и работает более эффективно. Svelte 'симулирует' переход и покадрово создает CSS-анимацию, а затем запускает ее.

Например переход `fade` превращается в CSS анимацию вроде этого:

```css
0% { opacity: 0 }
10% { opacity: 0.1 }
20% { opacity: 0.2 }
/* ... */
100% { opacity: 1 }
```

Мы можем повысить градус креатива. Давайте сделаем что-то совсем бесбашенное:

```html
<script>
	import { fade } from 'svelte/transition';
	import { elasticOut } from 'svelte/easing';

	let visible = true;

	function spin(node, { duration }) {
		return {
			duration,
			css: t => {
				const eased = elasticOut(t);

				return `
					transform: scale(${eased}) rotate(${eased * 1080}deg);
					color: hsl(
						${~~(t * 360)},
						${Math.min(100, 1000 - 1000 * t)}%,
						${Math.min(50, 500 - 500 * t)}%
					);`
			}
		};
	}
</script>
```

Помните: с большими возможностями приходит и большая ответственность.