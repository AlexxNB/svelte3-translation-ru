---
title: Директива use
---

Действия по сути являются функциями жизненного цикла на уровне элементов. Они полезны для таких вещей, как:

- взаимодействие со сторонними библиотеками
- 'ленивая' загрузка изображений
- всплывающие подсказки
- добавление пользовательских обработчиков событий

В этом приложении мы хотим закрыть оранжевый модал, когда пользователь нажимает за его пределами. У него есть обработчик событий для события `outclick`, но это не собственное событие DOM. Мы должны отправить это сами. Сначала импортируйте функцию `clickOutside`...

```js
import { clickOutside } from "./click_outside.js";
```

...и добавьте её к элементу в директиве `use`:

```html
<div class="box" use:clickOutside on:outclick="{() => (showModal = false)}">
 	Click outside me!
 </div>
```

Откройте файл `click_outside.js`. Как и функции перехода, функция действия получает `node` (который является элементом, к которому применяется действие) и некоторые необязательные параметры и возвращает объект действия. Этот объект может иметь функцию `destroy`, которая вызывается, когда элемент размонтирован.

Мы хотим запустить событие «outclick», когда пользователь щелкает за пределами оранжевого поля. Одна из возможных реализаций выглядит следующим образом:

```js
export function clickOutside(node) {
	const handleClick = (event) => {
		if (!node.contains(event.target)) {
			node.dispatchEvent(new CustomEvent("outclick"));
		}
	};

	document.addEventListener("click", handleClick, true);

	return {
		destroy() {
			document.removeEventListener("click", handleClick, true);
		}
	};
}
```

Обновите функцию `clickOutside`, нажмите кнопку, чтобы показать модал, а затем щелкните за его пределами, чтобы закрыть его.
