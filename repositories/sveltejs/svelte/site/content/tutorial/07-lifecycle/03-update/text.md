---
title: beforeUpdate и afterUpdate
---

Функция `beforeUpdate` выполнит код непосредственно перед обновлением DOM. Её коллега, функция `afterUpdate`, напротив, используется для запуска кода сразу после того, как DOM синхронизируется с вашими данными.

Вместе их можно использовать для выполнения действий в заранее определенной последовательности, чего трудно достичь, когда программа зависит от состояния, например, при обновлении позиции прокрутки элемента.

К примеру, у нас есть чатбот [Eliza](https://en.wikipedia.org/wiki/ELIZA), но нам приходится постоянно прокручивать окно чата, по мере поступления сообщений. Давайте это исправим:

```js
let div;
let autoscroll;

beforeUpdate(() => {
	autoscroll = div && (div.offsetHeight + div.scrollTop) > (div.scrollHeight - 20);
});

afterUpdate(() => {
	if (autoscroll) div.scrollTo(0, div.scrollHeight);
});
```

Обратите внимание, что `beforeUpdate` первый раз будет запущен до монтирования компонента, поэтому нам нужно проверить существование `div` перед чтением его свойств.