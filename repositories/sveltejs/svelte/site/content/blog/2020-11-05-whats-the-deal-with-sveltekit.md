---
title: В чем дело со SvelteKit?
description: Мы переосмысливаем, как создавать приложения Svelte. Вот что вам нужно знать...
author: Rich Harris
authorURL: https://twitter.com/rich_harris
---

<aside><p>Если вы <em>НЕ</em> посещали Svelte Summit, вы можете найти его на странице <a href="https://www.youtube.com/c/SvelteSociety/videos">Svelte Society YouTube</a></p></aside>

Если вы посещали в прошлом месяце [Svelte Summit](https://sveltesummit.com/) то, возможно, видели мой доклад «Футуристическая веб-разработка», в котором я наконец ответил на один из наиболее часто задаваемых вопросов о Svelte: когда Sapper достигнет версии 1.0?

Ответ: никогда.

Это была ирония - как объясняется в докладе, на самом деле это больше похоже на переписывание легаси Sapper в сочетании с ребрендингом - но это вызвало много новых вопросов от сообщества, и пришло время прояснить, что вы можете ожидать от преемника Sapper, SvelteKit.

<div class="max">
<figure style="max-width: 960px; margin: 0 auto">
<div style="height: 0; padding: 0 0 57.1% 0; position: relative; margin: 0 auto;">
	<iframe style="position: absolute; width: 100%; height: 100%; left: 0; top: 0; margin: 0;" src="https://www.youtube-nocookie.com/embed/qSfdtmcZ4d0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<figcaption>'Futuristic Web Development' from <a href="https://sveltesummit.com/">Svelte Summit</a></figcaption>
</figure>
</div>


## Что такое сапер?

[Sapper](https://sapper.svelte.dev) — это фреймворк приложения (или «метафреймворк»), построенный на основе Svelte (который представляет собой компонентный фреймворк). Его задача - упростить создание приложений Svelte с использованием всех современных передовых методов, таких как рендеринг на стороне сервера (SSR) и разделение кода, а также предоставить структуру проекта, которая делает разработку продуктивной и увлекательной. Он использует маршрутизацию на основе файловой системы (как популяризировано [Next](https://nextjs.org/) и принято многими другими фреймворками, хотя и с некоторыми улучшениями) - файловая структура вашего проекта отражает структуру самого приложения.

Хотя домашняя страница и документация Svelte предлагают вас [degit](https://github.com/Rich-Harris/degit) репозиторий [sveltejs/template](https://github.com/sveltejs/template) чтобы начать создание приложения, Sapper уже давно является нашим рекомендуемым способом создания приложений; этот пост в блоге (на момент написания!) рендерится с помощью Sapper.


## Почему мы переходим на что-то новое?

Во-первых, различие между [sveltejs/template](https://github.com/sveltejs/template) и [sveltejs/sapper-template](https://github.com/sveltejs/sapper-template) сбивает с толку, особенно новичков в Svelte. Наличие единого рекомендуемого способа создания приложений с помощью Svelte принесет огромные преимущества: мы упростим адаптацию, уменьшим нагрузку на обслуживание и поддержку и потенциально можем начать исследовать новые возможности, которые открываются при наличии предсказуемой структуры проекта. (Эта последняя часть намеренно расплывчата, потому что потребуется время, чтобы полностью понять, что это за возможности.)

Помимо всего этого, нас соблазнила мысль переписать Sapper. Отчасти это связано с тем, что кодовая база с годами стала немного неопрятной ([Sapper started in 2017](/blog/sapper-towards-the-ideal-web-app-framework)), но в основном потому, что в последнее время Интернет сильно изменился, и пришло время переосмыслить некоторые из наших основополагающих предположений.


## В чем же отличие?

Первое отличие в том, что вам необходимо использовать сборщик модулей, например [webpack](https://webpack.js.org/) или [Rollup](https://rollupjs.org/) для создания приложений. Эти инструменты отслеживают график зависимостей вашего приложения, анализируя и преобразуя код по пути (например, превращая компоненты Svelte в модули JS), чтобы создавать пакеты кода, которые могут работать где угодно. Как первоначальный создатель Rollup, я могу засвидетельствовать, что это удивительно сложная проблема с дьявольскими крайними случаями.

Вам определенно нужен был сборщик несколько лет назад, потому что браузеры изначально не поддерживали `import`, но сегодня это гораздо менее актуально. Прямо сейчас мы наблюдаем рост разделенного рабочего процесса разработки, который радикально проще: вместо того, чтобы с нетерпением объединять ваше приложение, сервер разработки может обслуживать модули (преобразованные в JavaScript, если необходимо) по запросу, что означает, что запуск происходит практически мгновенно. каким бы большим ни стало ваше приложение.

[Snowpack](https://www.snowpack.dev/) находится в авангарде этого движения, и именно этим движет SvelteKit. Он удивительно быстр и имеет прекрасный опыт разработки (горячая перезагрузка модулей, наложения ошибок и т. Д.), И мы тесно сотрудничаем с командой Snowpack над такими функциями, как SSR. Горячая перезагрузка модуля особенно важна, если вы привыкли использовать Sapper с Rollup (который никогда не имел первоклассной поддержки HMR из-за его архитектуры, которая отдает приоритет наиболее эффективному выходу).

Это не значит, что мы полностью отказываемся от сборщиков пакетов. По-прежнему важно оптимизировать ваше приложение для производства, и SvelteKit использует Rollup, чтобы сделать ваши приложения максимально быстрыми и экономичными (что включает такие вещи, как извлечение стилей в статические файлы `.css`).

Другое отличие в том, что серверное приложение нуждается в сервере. Sapper фактически имеет два режима — `sapper build`, которая создает автономное приложение, которое должно запускаться на сервере Node, и `sapper export` который превращает ваше приложение в набор статических файлов, подходящих для размещения на таких сервисах, как GitHub Pages.

Статические файлы могут быть какими угодно, но запуск сервера Node (а также его мониторинг / масштабирование и т. д.) не так прост. В настоящее время мы наблюдаем переход к бессерверным платформам, в которых вам как автору приложения не нужно думать о сервере, на котором работает ваш код, со всей сопутствующей сложностью. Вы можете запускать приложения Sapper на бессерверных платформах благодаря таким вещам, как [vercel-sapper](https://github.com/thgh/vercel-sapper), но это, конечно, не то, что вы бы назвали идиоматическим.

<aside><p>По-прежнему можно будет создавать как приложения Node, так и полностью отрендеренные (также известные как экспортированные) сайты.</p></aside>

SvelteKit полностью охватывает бессерверную парадигму и будет запущен с поддержкой всех основных бессерверных провайдеров, с «адаптерным» API для нацеливания на любые платформы, которые мы официально не обслуживаем. Кроме того, мы сможем выполнять частичный предварительный рендеринг, что означает, что статические страницы могут быть созданы во время сборки, а динамические - по запросу.


## Когда я смогу начать использовать это?

Если вы чувствуете себя смелым, можете начать прямо сейчас:

```bash
npm init svelte@next
```

Это создаст основу для нового проекта и установит интерфейс командной строки `@sveltejs/kit`, который предоставляет инструменты для разработки и создания приложения.

Но мы не рекомендуем это делать! Документов нет, и мы не сможем предложить какую-либо поддержку. Это также может часто ломаться.

Работа ведется в частном монорепозитории, пока мы все еще находимся в режиме исследования. Мы планируем подготовить общедоступную бета-версию и объявить о ней здесь, как только мы закроем несколько проблем - репозиторий останется закрытым в это время, но мы создадим место для сбора отзывов от YOLO. После этого мы будем работать над выпуском 1.0, который будет включать открытие репо.

Я не собираюсь давать никаких твердых обещаний относительно сроков, потому что я не люблю нарушать обещания. Но я думаю, что мы говорим о неделях, а не о месяцах.


## Что делать, если я не хочу использовать SvelteKit?

Всегда можно будет использовать Svelte как отдельный пакет или через интеграцию сборщика, например [rollup-plugin-svelte](https://github.com/sveltejs/rollup-plugin-svelte). Мы думаем, что очень важно, чтобы вы могли приспособить Svelte к своему рабочему процессу, пусть даже и эзотерическому, и использовать сторонние фреймворки приложений, такие как [Elder.js](https://github.com/Elderjs/elderjs), [Routify](https://routify.dev/), [Plenti](https://plenti.co/), [Crown](https://crownframework.com/), [JungleJS](https://www.junglejs.org/) и другие.


## TypeScript?

Не волнуйтесь, мы не запустимся без полной поддержки TypeScript.


## Как я могу перенести мои существующие приложения Sapper?

По большей части, перенос кодовой базы Sapper должен быть относительно простым.

Есть некоторые неизбежные изменения (возможность работать на бессерверных платформах означает, что нам нужно заменить пользовательские файлы `server.js` и функции `(req, res) => {...}` более переносимыми эквивалентами), и мы пользуемся возможностью чтобы исправить несколько недостатков дизайна, но в целом приложение SvelteKit будет хорошо знакомо пользователям Sapper.

Подробные руководства по миграции будут сопровождать запуск 1.0.


## Как я могу внести свой вклад?

Следите за объявлениями о том, когда мы запустим публичную бета-версию и откроем репо. (Кроме того, теперь у нас есть место [OpenCollective](https://opencollective.com/svelte), где вы можете внести финансовый вклад в проект, если он был для вас ценен. Большое, большое спасибо тем из вас, кто уже сделал это.)


## Где я могу узнать больше?

Следите за [@sveltejs](https://twitter.com/sveltejs) и [@SvelteSociety](https://twitter.com/SvelteSociety) в Twitter, и заходите на [svelte.dev/chat](https://svelte.dev/chat). Вам также следует подписаться на [Svelte Radio](https://www.svelteradio.com/), где Кевин и его со-ведущие будут расспрашивать меня об этом проекте в следующем эпизоде ​​(и в период с настоящего момента до следующей недели, когда мы его запишем, [reply to this Twitter thread](https://twitter.com/Rich_Harris/status/1323376048571121665) с вашими дополнительными вопросами).