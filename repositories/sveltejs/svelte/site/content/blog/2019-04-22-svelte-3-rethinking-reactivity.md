---
title: Svelte 3: Переосмысление реактивности
description: Наконец-то это здесь
author: Rich Harris
authorURL: https://twitter.com/Rich_Harris
translator: Pavel Malyshev
draft: true
---

После нескольких месяцев, которые пролетели как нескольких дней, мы на седьмом небе от счастья потому, что можем объявить о стабильном релизе Svelte 3. Это огромный релиз, результат сотен часов работы многих людей в сообществе Svelte, включая бесценные отзывы бета-тестеров, которые помогали формировать дизайн на каждом этапе этого пути.

Мы думаем, вам это понравится.


## Что такое Svelte?

Svelte - это компонентный фреймворк, похожий на React или Vue, но с важным отличием. Традиционные фреймворки позволяют вам писать *декларативный* state-driven код, но есть одно наказание: браузер должен выполнить дополнительную работу для преобразования этих декларативных структур в DOM манипуляции, используя техники, такие как [virtual DOM diffing](blog/virtual-dom-is-pure-overhead), которые съедают ваши кадры отрисовки и облагают налогом сборщик мусора.

Вместо этого Svelte запускается во *время сборки*, преобразуя ваши компоненты в высокоэффективный *императивный* код, который хирургически обновляет DOM. В результате вы можете писать амбициозные приложения с отличными характеристиками производительности.

Первая версия Svelte была посвящена [проверке гипотезы](blog/frameworks-without-the-framework) — что специально созданный компилятор может генерировать надежный код, который обеспечивает отличный пользовательский опыт. Вторая версия была посвящена небольшим улучшением, которые привели некоторые вещи в порядок.

Svelte 3 - это серьезный пересмотр. В течение последних пяти или шести месяцев мы уделяли особое внимание пользовательскому опыту разработчиков. Теперь есть возможность писать компоненты со [значительно меньшим количеством бойлерплейта](blog/write-less-code) чем где-либо. Попробуйте совершенно новый [учебник](tutorial) и посмотрите что мы имеем ввиду — если вы знакомы с другими фреймворками, думаем, вы будете приятно удивлены.

Чтобы сделать это возможным, нам сначала нужно было переосмыслить концепцию, лежащую в основе современных UI фреймворков: реактивность.

<div class="max">
<figure style="max-width: 960px; margin: 0 auto">
<div style="height: 0; padding: 0 0 57.1% 0; position: relative; margin: 0 auto;">
	<iframe style="position: absolute; width: 100%; height: 100%; left: 0; top: 0; margin: 0;" src="https://www.youtube-nocookie.com/embed/AdNJ3fydeao" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<figcaption>'Переосмысление реактивности' на <a href="https://www.israel.yglfconf.com/">You Gotta Love Frontend Code Camp</a></figcaption>
</figure>
</div>


## Перемещение реактивности в язык

В предыдущих версиях Svelte, вы должны были сообщить компьютеру что какая-то часть состояния изменилась с помощью вызова метода `this.set`:

```js
const { count } = this.get();
this.set({
	count: count + 1
});
```

Это заставляло компонент *реагировать*. Кстати об этом, `this.set` практически идентичен методу `this.setState`, который использовался в классическом (до хуков) React:

```js
const { count } = this.state;
this.setState({
	count: count + 1
});
```
Есть некоторые важные технические различия (как я объясняю в видео выше, React не реагирует), но концептуально это одно и то же.

<aside>
	<p>По факту, Svelte 3 в основном <a href="https://twitter.com/threepointone/status/1057179801109311488">вина Sunil'а </a>.</p>
</aside>

Все изменилось с появлением [реакт хуков](https://reactjs.org/docs/hooks-intro.html) которые управляют состоянием совсем по-другому. Многие фреймворки начали экспериментировать со своими собственными реализациями хуков, но мы быстро пришли к выводу, что это не то направление, куда мы хотели бы идти. Хуки имеют некоторые интригующие свойства, но они также включают в себя неестественный код и создают ненужную работу для сборщика мусора. Для фреймворка, который используется на [embedded-устройствах](https://mobile.twitter.com/sveltejs/status/1088500539640418304), а также в тяжелых интерактивных анимациях, это не хорошо.

Поэтому мы сделали шаг назад и спросили себя, какой API будет работать для нас ... и поняли, что лучший API - это отсутствие API. Мы можем просто *использовать язык*. Обновление некоторого значения `count` - и всех вещей, которые зависят от него - должно быть простым:

```js
count += 1;
```

Поскольку мы являемся компилятором, мы можем сделать это, осуществляя фактическое назначение за кулисами:

```js
count += 1; $$invalidate('count', count);
```
Важно отметить, что мы можем сделать все это без лишних затрат и сложности использования прокси или аксессоров. Это просто переменная.

## Новый облик

Не только ваши компоненты получают подтяжку лица. Svelte имеет совершенно новый внешний вид благодаря удивительной дизайнерской работе [Achim Vedam](https://vedam.de/), который создал новый логотип и веб-сайт, перемещенный с [svelte.technology](https://svelte.technology) на [svelte.dev](https://svelte.dev).

Мы также изменили наш слоган с «Магически исчезающего UI фреймворка» на «Кибернетически улучшенные веб-приложения». У Svelte есть много аспектов - отличная производительность, небольшой размер бандла, доступность, встроенная инкапсуляция стилей, декларативные анимации переходов, простота использования, тот факт, что это компилятор и т.д. Поэтому сосредоточение внимания на одном из них кажется несправедливым по отношению к другим.

## Обновление с версии 2

Если вы уже являетесь пользователем Svelte 2, боюсь, потребуется некоторое ручное обновление. В ближайшие дни мы выпустим руководство по миграции и обновленную версию [svelte-upgrade](https://github.com/sveltejs/svelte-upgrade), которая сделает все возможное, чтобы автоматизировать процесс, но *это* существенные изменения, поэтому не все может быть обработано автоматически.

Мы не принимаем это всерьез: надеюсь, что, испытав Svelte 3, вы поймете, почему мы сочли необходимым порвать с прошлым.


## Все еще впереди

Каким бы ужасным ни был этот релиз, мы еще не закончили. У нас есть масса идей для создания более умного, более компактного кода и длинного списка пожеланий. [Sapper](https://sapper.svelte.technology), наш фреймворк для приложений в стиле Next.js, все еще находится в процессе обновления для использования совместно с Svelte 3. Проект сообщества [Svelte Native](https://svelte-native.technology/), который позволяет писать приложения для Android и iOS на Svelte, продвигается вперед, но заслуживает более полной поддержки со стороны ядра.

У нас пока нет множества расширений для редакторов, подсветки синтаксиса, наборов компонентов, devtools и т. д., которые есть у других фреймворков, и мы должны это исправить. Мы *действительно* хотим добавить первоклассную поддержку TypeScript.

Несмотря на это, даже сейчас мы считаем, что Svelte 3 - лучший способ создания веб-приложений. Потратьте час, чтобы пройти [учебник](tutorial) и мы надеемся убедить вас в этом. В любом случае, мы хотели бы видеть вас в нашем [Discord чате](https://discord.gg/yy75DKs) и на [GitHub](https://github.com/sveltejs/svelte) — добро пожаловать всем, особенно вам.
