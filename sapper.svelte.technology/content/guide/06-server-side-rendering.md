---
title: Ренедринг на стороне сервера (SSR)
---

По умолчанию, Sapper рендерит сначала серверную часть (SSR), а затем заново монтирует любые динамические элементы на стороне клиенте. Svelte отлично [поддерживает SSR](https://svelte.technology/guide#server-side-rendering). Среди достоинств рендеринга на сервере - лучшая производительностЬ и более качественная индексация сайта поисковыми системами, но вместе с тем есть и некоторые сложности.

### Создание компонента совместимого с SSR

Sapper хорошо работает с большинством сторонних библиотек, с которыми вы можете столкнуться. Однако иногда сторонняя библиотека поставляется собранной таким образом, с прицелом на работу сразу с несколькими различными загрузчиками модулей. Иногда такой подход создает зависимость от объекта `window`, например может проверяться на существование свойство `window.global`.

Поскольку в серверной среде, такой как Sapper, нет `window`, действие простого импорта такого модуля может привести к сбою импорта и завершить работу сервера Sapper с ошибкой:

```bash
ReferenceError: window is not defined
```

Чтобы избежать таких ошибок, используйте динамический импорт для вашего компонента из хука oncreate (который вызывается только на стороне клиента). В этом слуучае, такой код не будет исполнен на сервере:

```js
export default {
  async oncreate () {
    const MyComponent = await import('my-non-ssr-component')
    this.set({ MyComponent })
  }
}
```

Затем вы можете использовать этот компонент в вашем приложении:

```html
<svelte:component this={MyComponent}
  {prop1}
  prop2="foo"
/>
```
> Может случиться так, что ваш компонент использует экспорт по умолчанию, который по сути является объектом со свойством `default`, и в этом случае вы должны использовать его как `{ default: MyComponent }`, а не просто `MyComponent`
